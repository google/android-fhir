{
  "resourceType": "Questionnaire",
  "item": [
    {
      "linkId": "1",
      "type": "choice",
      "text": "Has the client received this year's seasonal flu vaccine?",
      "answerOption": [
        {
          "valueCoding": {
            "code": "Y",
            "display": "Yes",
            "system": "custom"
          }
        },
        {
          "valueCoding": {
            "code": "N",
            "display": "No",
            "system": "custom"
          }
        },
        {
          "valueCoding": {
            "code": "unknown",
            "display": "Unknown",
            "system": "custom"
          }
        }
      ]
    },
    {
      "text": "Date of Vaccination?",
      "type": "date",
      "linkId": "yes",
      "extension": [
        {
          "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-enableWhenExpression",
          "valueExpression": {
            "expression": "%resource.descendants().where(linkId='1').answer.value.display.lower() = %context.linkId",
            "language": "text/fhirpath"
          }
        }
      ]
    },
    {
      "text": "Date of vaccination not provided",
      "type": "display",
      "linkId": "no",
      "extension": [
        {
          "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-enableWhenExpression",
          "valueExpression": {
            "expression": "%resource.descendants().where(linkId='1').answer.value.display.lower() = %context.linkId",
            "language": "text/fhirpath"
          }
        }
      ]
    },
    {
      "text": "Date of vaccination not known",
      "type": "display",
      "linkId": "unknown",
      "extension": [
        {
          "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-enableWhenExpression",
          "valueExpression": {
            "expression": "%resource.descendants().where(linkId='1').answer.value.where(display.lower() = %context.linkId).exists()",
            "language": "text/fhirpath"
          }
        }
      ]
    }
  ]
}