{
  "resourceType": "Questionnaire",
  "item": [
    {
      "linkId": "a-birthdate",
      "text": "Date of birth",
      "type": "date"
    },
    {
      "linkId": "a-age-years",
      "text": "Age",
      "type": "integer",
      "extension": [
        {
          "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-calculatedExpression",
          "valueExpression": {
            "language": "text/fhirpath",
            "expression": "%resource.repeat(item).where(linkId='a-birthdate' and answer.empty().not()).select(iif(answer.value + 1 year > today(),0,iif(answer.value + 2 year > today(),1,iif(answer.value + 3 year > today(),2,iif(answer.value + 4 year > today(),3,iif(answer.value + 5 year > today(),4,iif(answer.value + 6 year > today(),5,iif(answer.value + 7 year > today(),6,7))))))))"
          }
        }
      ]
    }
  ]
}