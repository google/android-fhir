{
  "resourceType": "Questionnaire",
  "extension": [
    {
      "url": "http://hl7.org/fhir/StructureDefinition/variable",
      "valueExpression": {
        "name": "q1",
        "language": "text/fhirpath",
        "expression": "%resource.descendants().where(linkId='7cc2e8a9-197a-42ea-9431-ba01eefc6511').answer.value"
      }
    },
    {
      "url": "http://hl7.org/fhir/StructureDefinition/variable",
      "valueExpression": {
        "name": "q1-boolean-safe",
        "language": "text/fhirpath",
        "expression": "iif(%q1-boolean.exists(), %q1-boolean, false)"
      }
    },
    {
      "url": "http://hl7.org/fhir/StructureDefinition/variable",
      "valueExpression": {
        "name": "basic-questions-exists",
        "language": "text/fhirpath",
        "expression": "%q1-boolean.exists() and %q2-boolean.exists() and %q3-boolean.exists() and %q4-boolean.exists() and %q5a-boolean.exists() and %q6a-boolean.exists() and %q6b-boolean.exists() and (%q6c-boolean.exists() or %q7-boolean.exists())"
      }
    },
    {
      "url": "http://hl7.org/fhir/StructureDefinition/variable",
      "valueExpression": {
        "name": "low-risk",
        "language": "text/fhirpath",
        "expression": "((%q1-boolean or %q1-boolean.not()) or (%q2-boolean or %q2-boolean.not())) and (%moderate-risk-helper.not() and %high-risk-helper.not() and %severe-risk-helper.not())"
      }
    }
  ],
  "item": [
    {
      "linkId": "1",
      "type": "group",
      "extension": [
        {
          "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
          "valueCodeableConcept": {
            "coding": [
              {
                "system": "http://hl7.org/fhir/questionnaire-item-control",
                "code": "page",
                "display": "Page"
              }
            ],
            "text": "Page"
          }
        }
      ],
      "item": [
        {
          "linkId": "a-birthdate",
          "text": "Birth Date",
          "type": "boolean",
          "extension": [
            {
              "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-calculatedExpression",
              "valueExpression": {
                "language": "text/fhirpath",
                "expression": "%q1"
              }
            }
          ]
        },
        {
          "linkId": "7cc2e8a9-197a-42ea-9431-ba01eefc6511",
          "text": "In the past month, have you wished you were dead or wished you could go to sleep and not wake up?",
          "type": "boolean"
        }
      ]
    },
    {
      "linkId": "2",
      "type": "group",
      "extension": [
        {
          "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
          "valueCodeableConcept": {
            "coding": [
              {
                "system": "http://hl7.org/fhir/questionnaire-item-control",
                "code": "page",
                "display": "Page"
              }
            ],
            "text": "Page"
          }
        }
      ],
      "item": [

        {
          "linkId": "a-birthdate-2",
          "text": "Birth Date",
          "type": "boolean",
          "extension": [
            {
              "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-calculatedExpression",
              "valueExpression": {
                "language": "text/fhirpath",
                "expression": "%q1"
              }
            }
          ]
        }
      ]
    },
    {
      "linkId": "3",
      "type": "group",
      "extension": [
        {
          "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
          "valueCodeableConcept": {
            "coding": [
              {
                "system": "http://hl7.org/fhir/questionnaire-item-control",
                "code": "page",
                "display": "Page"
              }
            ],
            "text": "Page"
          }
        }
      ],
      "item": [
        {
          "linkId": "3.1",
          "type": "display",
          "text": "Address",
          "prefix":"3."
        },
        {
          "linkId": "3.2",
          "type": "string",
          "item": [
            {
              "linkId": "10.1",
              "text": "House number and street",
              "type": "display",
              "extension": [
                {
                  "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                  "valueCodeableConcept": {
                    "coding": [
                      {
                        "system": "http://hl7.org/fhir/questionnaire-item-control",
                        "code": "flyover",
                        "display": "Fly-over"
                      }
                    ],
                    "text": "Flyover"
                  }
                }
              ]
            }
          ]
        },
        {
          "linkId": "3.3",
          "type": "string",
          "item": [
            {
              "linkId": "11.1",
              "text": "Apartment, unit",
              "type": "display",
              "extension": [
                {
                  "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                  "valueCodeableConcept": {
                    "coding": [
                      {
                        "system": "http://hl7.org/fhir/questionnaire-item-control",
                        "code": "flyover",
                        "display": "Fly-over"
                      }
                    ],
                    "text": "Flyover"
                  }
                }
              ]
            }
          ]
        },
        {
          "linkId": "3.4",
          "type": "string",
          "item": [
            {
              "linkId": "12.1",
              "text": "City, town or village",
              "type": "display",
              "extension": [
                {
                  "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                  "valueCodeableConcept": {
                    "coding": [
                      {
                        "system": "http://hl7.org/fhir/questionnaire-item-control",
                        "code": "flyover",
                        "display": "Fly-over"
                      }
                    ],
                    "text": "Flyover"
                  }
                }
              ]
            }
          ]
        },
        {
          "linkId": "3.5",
          "type": "string",
          "item": [
            {
              "linkId": "13.1",
              "text": "County",
              "type": "display",
              "extension": [
                {
                  "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                  "valueCodeableConcept": {
                    "coding": [
                      {
                        "system": "http://hl7.org/fhir/questionnaire-item-control",
                        "code": "flyover",
                        "display": "Fly-over"
                      }
                    ],
                    "text": "Flyover"
                  }
                }
              ]
            }
          ]
        },
        {
          "linkId": "3.6",
          "type": "string",
          "required": true,
          "item": [
            {
              "linkId": "14.1",
              "text": "Postal Code",
              "type": "display",
              "extension": [
                {
                  "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                  "valueCodeableConcept": {
                    "coding": [
                      {
                        "system": "http://hl7.org/fhir/questionnaire-item-control",
                        "code": "flyover",
                        "display": "Fly-over"
                      }
                    ],
                    "text": "Flyover"
                  }
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "linkId": "4",
      "type": "group",
      "extension": [
        {
          "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
          "valueCodeableConcept": {
            "coding": [
              {
                "system": "http://hl7.org/fhir/questionnaire-item-control",
                "code": "page",
                "display": "Page"
              }
            ],
            "text": "Page"
          }
        }
      ],
      "item": [
        {
          "linkId": "4.1",
          "type": "display",
          "text": "Alternative contact person",
          "prefix":"4.",
          "item": [
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-displayCategory",
                  "valueCodeableConcept": {
                    "coding": [
                      {
                        "system": "http://hl7.org/fhir/questionnaire-display-category",
                        "code": "instructions"
                      }
                    ]
                  }
                }
              ],
              "linkId": "15.1",
              "text": "The alternative contact would be used in the case of an emergency situation and could be next of kin (e.g. partner, mother, sibling.)",
              "type": "display"
            }
          ]
        },
        {
          "linkId": "4.2",
          "type": "string",
          "required": true,
          "item": [
            {
              "linkId": "16.1",
              "text": "Name",
              "type": "display",
              "extension": [
                {
                  "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                  "valueCodeableConcept": {
                    "coding": [
                      {
                        "system": "http://hl7.org/fhir/questionnaire-item-control",
                        "code": "flyover",
                        "display": "Fly-over"
                      }
                    ],
                    "text": "Flyover"
                  }
                }
              ]
            }
          ]
        },
        {
          "linkId": "4.3",
          "type": "choice",
          "required": true,
          "extension": [
            {
              "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
              "valueCodeableConcept": {
                "coding": [
                  {
                    "system": "http://hl7.org/fhir/questionnaire-item-control",
                    "code": "drop-down",
                    "display": "Drop down"
                  }
                ],
                "text": "Drop down"
              }
            }
          ],
          "item": [
            {
              "linkId": "17.1",
              "text": "Relationship",
              "type": "display",
              "extension": [
                {
                  "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                  "valueCodeableConcept": {
                    "coding": [
                      {
                        "system": "http://hl7.org/fhir/questionnaire-item-control",
                        "code": "flyover",
                        "display": "Fly-over"
                      }
                    ],
                    "text": "Flyover"
                  }
                }
              ]
            }
          ],
          "answerOption": [
            {
              "valueCoding": {
                "code": "child",
                "display": "Child"
              }
            },
            {
              "valueCoding": {
                "code": "father",
                "display": "Father"
              }
            },
            {
              "valueCoding": {
                "code": "mother",
                "display": "Mother"
              }
            },
            {
              "valueCoding": {
                "code": "sibling",
                "display": "Sibling"
              }
            },
            {
              "valueCoding": {
                "code": "other",
                "display": "Other"
              }
            }
          ]
        },
        {
          "linkId": "4.4",
          "type": "string",
          "item": [
            {
              "linkId": "18.1",
              "text": "Phone number",
              "type": "display",
              "extension": [
                {
                  "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                  "valueCodeableConcept": {
                    "coding": [
                      {
                        "system": "http://hl7.org/fhir/questionnaire-item-control",
                        "code": "flyover",
                        "display": "Fly-over"
                      }
                    ],
                    "text": "Flyover"
                  }
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "linkId": "5",
      "type": "group",
      "extension": [
        {
          "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
          "valueCodeableConcept": {
            "coding": [
              {
                "system": "http://hl7.org/fhir/questionnaire-item-control",
                "code": "page",
                "display": "Page"
              }
            ],
            "text": "Page"
          }
        }
      ],
      "item": [
        {
          "linkId": "5.1",
          "type": "choice",
          "text": "What is the highest level of education achieved?",
          "prefix": "5.",
          "extension": [
            {
              "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
              "valueCodeableConcept": {
                "coding": [
                  {
                    "system": "http://hl7.org/fhir/questionnaire-item-control",
                    "code": "radio-button",
                    "display": "Radio Button"
                  }
                ],
                "text": "Radio button"
              }
            }
          ],
          "answerOption": [
            {
              "valueCoding": {
                "code": "education",
                "display": "Does not know level of education"
              }
            },
            {
              "valueCoding": {
                "code": "primary-school",
                "display": "Primary school"
              }
            },
            {
              "valueCoding": {
                "code": "secondary-school",
                "display": "Secondary school"
              }
            },
            {
              "valueCoding": {
                "code": "higher-education",
                "display": "Higher education"
              }
            }
          ]
        }
      ]
    },
    {
      "linkId": "6",
      "type": "group",
      "extension": [
        {
          "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
          "valueCodeableConcept": {
            "coding": [
              {
                "system": "http://hl7.org/fhir/questionnaire-item-control",
                "code": "page",
                "display": "Page"
              }
            ],
            "text": "Page"
          }
        }
      ],
      "item": [
        {
          "linkId": "6.1",
          "type": "choice",
          "repeats": true,
          "text": "Who does the client live with?",
          "prefix": "6.",
          "extension": [
            {
              "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
              "valueCodeableConcept": {
                "coding": [
                  {
                    "system": "http://hl7.org/fhir/questionnaire-item-control",
                    "code": "check-box",
                    "display": "Checkbox"
                  }
                ],
                "text": "Checkbox"
              }
            }
          ],
          "answerOption": [
            {
              "valueCoding": {
                "code": "Parents",
                "display": "Parents"
              }
            },
            {
              "valueCoding": {
                "code": "siblings",
                "display": "Siblings"
              }
            },
            {
              "valueCoding": {
                "code": "extended-family",
                "display": "Extended family"
              }
            },
            {
              "valueCoding": {
                "code": "partner",
                "display": "Partner"
              }
            },
            {
              "valueCoding": {
                "code": "friends",
                "display": "Friend(s)"
              }
            },
            {
              "valueCoding": {
                "code": "no-one",
                "display": "No one"
              }
            }
          ]
        }
      ]
    },
    {
      "linkId": "7",
      "type": "group",
      "extension": [
        {
          "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
          "valueCodeableConcept": {
            "coding": [
              {
                "system": "http://hl7.org/fhir/questionnaire-item-control",
                "code": "page",
                "display": "Page"
              }
            ],
            "text": "Page"
          }
        }
      ],
      "item": [
        {
          "linkId": "7.1",
          "type": "choice",
          "text": "Has the client received this yearâ€™s seasonal flu vaccine?",
          "prefix": "7.",
          "extension": [
            {
              "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
              "valueCodeableConcept": {
                "coding": [
                  {
                    "system": "http://hl7.org/fhir/questionnaire-item-control",
                    "code": "radio-button",
                    "display": "Radio Button"
                  }
                ],
                "text": "Radio button"
              }
            }
          ],
          "answerOption": [
            {
              "valueCoding": {
                "code": "yes",
                "display": "Yes"
              }
            },
            {
              "valueCoding": {
                "code": "no",
                "display": "No"
              }
            },
            {
              "valueCoding": {
                "code": "unknown",
                "display": "Unknown"
              }
            }
          ]
        }
      ]
    },
    {
      "linkId": "8",
      "type": "group",
      "extension": [
        {
          "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
          "valueCodeableConcept": {
            "coding": [
              {
                "system": "http://hl7.org/fhir/questionnaire-item-control",
                "code": "page",
                "display": "Page"
              }
            ],
            "text": "Page"
          }
        }
      ],
      "item": [
        {
          "linkId": "8.1",
          "type": "date",
          "text": "When was their last menstrual period? (LMP)",
          "prefix": "8."
        }
      ]
    },
    {
      "linkId": "9",
      "type": "group",
      "extension": [
        {
          "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
          "valueCodeableConcept": {
            "coding": [
              {
                "system": "http://hl7.org/fhir/questionnaire-item-control",
                "code": "page",
                "display": "Page"
              }
            ],
            "text": "Page"
          }
        }
      ],
      "item": [
        {
          "linkId": "9.1",
          "type": "integer",
          "text": "How many times have they been pregnant?",
          "prefix": "9.",
          "extension": [
            {
              "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
              "valueCodeableConcept": {
                "coding": [
                  {
                    "system": "http://hl7.org/fhir/questionnaire-item-control",
                    "code": "slider",
                    "display": "Slider"
                  }
                ],
                "text": "Slider"
              }
            }
          ]
        }
      ]
    },
    {
      "linkId": "10",
      "type": "group",
      "extension": [
        {
          "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
          "valueCodeableConcept": {
            "coding": [
              {
                "system": "http://hl7.org/fhir/questionnaire-item-control",
                "code": "page",
                "display": "Page"
              }
            ],
            "text": "Page"
          }
        }
      ],
      "item": [
        {
          "linkId": "10.1",
          "type": "dateTime",
          "text": "What was the date and time of the ultrasound?",
          "prefix": "10.",
          "required": true
        }
      ]
    }
  ]
}
